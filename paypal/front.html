<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .tpfield {
            height: 40px;
            width: 300px;
            border: 1px solid gray;
            margin: 5px 0;
            padding: 5px;
        }

        .input {
            width: 200px;
            height: 38px;
            border: 1px solid #E8E8E8;
            border-radius: 5px;
            color: #000000;
            margin: 0 5px;
            outline: medium;
        }
        .client-format {
            font-size: 16px;
            padding:10px 0;
        }
    </style>


</head>

<body>
    <script src="https://js.tappaysdk.com/tpdirect/v5.7.0"></script>
    <script>
        var fields = {
            number: {
                element: "#card-number",
                placeholder: " **** **** **** ****"
            },
            expirationDate: {
                element: "#card-expiration-date",
                placeholder: " MM / YY"
            },
            ccv: {
                element: "#card-ccv",
                placeholder: " CCV"
            }
        };
        TPDirect.card.setup({
            fields: fields,
            styles: {
                'input': {
                    'color': 'gray'
                },
                'input.ccv': {
                    'font-size': '16px'
                },
                'input.expiration-date': {
                    'font-size': '16px'
                },
                'input.card-number': {
                    'font-size': '16px'
                },
                ':focus': {
                    'color': 'black'
                },
                '.valid': {
                    'color': 'green'
                },
                '.invalid': {
                    'color': 'red'
                },
                '@media screen and (max-width: 400px)': {
                    'input': {
                        'color': 'orange'
                    }
                }
            }
        });
        TPDirect.setupSDK(11327, 'app_whdEWBH8e8Lzy4N6BysVRRMILYORF6UxXbiOFsICkz0J9j1C0JUlCHv1tVJC', 'sandbox')
        
        
        function checkAndPay(event) {
            console.log("test")
            event.preventDefault();
            //const tappaystatus = TPDirect.card.getTappayFieldsStatus();
            //console.log(tappaystatus);
            TPDirect.card.getPrime(function (result) {
                //console.log(result); //status:0, msg:succrss
                if (result.status !== 0) {
                    renderError("信用卡資訊輸入錯誤");
                    return;
                }
                let prime = result.card.prime;
                let phone = document.getElementById("client-phonenum");
                let email = document.getElementById("client-email");
                let name = document.getElementById("client-name");
                makeaPayment(prime, phone, email, name);
            });
        };
    </script>




    <div class="client-format">
        卡片號碼 :
    </div>
    <div class="input" id="card-number"></div>
    <div class="client-format">
        過期時間 :
    </div>
    <div class="input" id="card-expiration-date"></div>
    <div class="client-format">
        驗證密碼 :
    </div>
    <div class="input" id="card-ccv"></div>
    <button id="booking-btn" onclick="checkAndPay(event);">確認訂購並付款</button>

</body>

</html>